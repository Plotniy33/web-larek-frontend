# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание основных типов данных:

- **IAppState** - Интерфейс для типов общего стостояния приложения.
- **IProduct** - Интерфейс, описывающий структуру данных продукта, включает в себя: ID товара, описание товара, URL изображения товара, название товара, категория товара, стоимость товара.
- **IDeliveryForm** - Используется для указания атрибутов формы заказа, включает данные: адрес доставки и способ оплаты.
- **IContactForm** - Устанавливает поля для заполнения контактной информации пользователей, включающие в себя электронную почту и номер телефона.
- **IOrder** - Интерфейс для типов данных заказа.
- **IOrderResult** - Интерфейс для результата оформления заказа.

```
// Интерфейс для данных страницы
interface IPage {
	counter: number | null; // Счетчик
	catalog: HTMLElement[]; // Элементы каталога
	locked: boolean; // блокировка страницы
}

// Интерфейс для данных карточки товара
interface ICard extends IProduct {
	index?: string; // Индекс карточки
	buttonTitle?: string; // Название кнопки
}

// Интерфейс описывающий состояние формы
export interface IFormState {
	valid: boolean; // Валидность формы
    errors: string[]; // Ошибки формы
}

// Интерфейс описания итоговой суммы в случае успешной операции
interface ISuccess {
	total: number; // Общая сумма
}

// Интерфейс типизации элеметнов корзины
interface IBasket {
	items: HTMLElement[]; // Элементы в корзине
	total: number; // Общая сумма
}

// Интерфейс описывающий методы работы с API

interface ILarekApi {
	getProductList: () => Promise<IProduct[]>; // Получение списка товаров
	getProductItem: (id: Id) => Promise<IProduct>; // Получение информации о товаре
	orderProduct: (order: Iorder) => Promise<IorderResult>; // Оформление заказа товаров
}
```

## Базовый код:

### Класс Model:

объявлен как абстрактный, что означает, что его экземпляры нельзя создать напрямую. Вместо этого этот класс используется в качестве базового для других классов, которые будут наследовать его и расширять функциональность, определенную в этом классе.

#### Конструктор класса:

Класс Model имеет конструктор, который принимает частичные данные типа T и объект событий IEvents. Частичные данные T представляют структуру данных, которая может быть использована для инициализации экземпляра класса. Объект IEvents содержит определения различных событий, которые могут быть сгенерированы и обработаны внутри класса.

#### Метод emitChanges:

Этот метод отвечает за генерацию событий с использованием объекта events. Когда вызывается метод emitChanges, он запускает соответствующее событие из объекта events, что позволяет другим частям кода слушать эти события и реагировать на них.
Таким образом, класс Model предоставляет основной шаблон для создания моделей данных, которые могут инициализироваться, управлять событиями и обеспечивать базовую абстракцию для работы с данными в приложении.

### Класс Component:

является базовым абстрактным классом для всех компонентов пользовательского интерфейса в данном проекте, предоставляя основные методы для взаимодействия с DOM-элементами, управления их поведением и внешним видом.

#### Конструктор класса:

constructor(container: HTMLElement) - принимает элемент контейнера, в который будет помещен компонент.

#### Методы:

- toggleClass: Переключает класс у указанного элемента.
- setText: Устанавливает текстовое содержимое для указанного элемента.
- setDisabled: Mеняет статус блокировки.
- setHidden: Скрывает элемент.
- setVisible: Показывает элемент.
- setImage: Устанавливает изображение с альтернативным текстом.
- render: Возвращает корневой DOM элемент.

### Класс Api:

базовый класс осуществляющий обмен данными с сервером через запросы(GET, POST).

#### Конструктор класса:

принимает два параметра: baseUrl (базовый URL API) и options (настройки запроса). Если options не передан, он будет инициализирован пустым объектом {}.

#### Методы:

- handleResponse: обрабатывает ответы от API и возвращает данные или генерирует ошибку.
- get: Формирует HTTP запросы методом GET.
- post: Формирует HTTP запросы методом POST.

### Класс EventEmitter:

обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

#### Конструктор класса:

Инициализирует \_events как карту для управления подписками на события.

#### Методы:

- on: добавляет события.
- off: убирает события.
- emit: вызывает событие.
- onAll: подписывает на все события.
- ofAll: сбрасывает все обработчикаи событий.
- trigger: генерирует заданное событие.

## Компоненты модели данных (Model):

### Класс Model

### Класс Product:

отвечает за представление данных продукта в проекте. Он обеспечивает структуру для хранения и доступа к характеристикам продукта. Расширяется базовым абстрактным классом Model<T> по интерфейсу 'IProduct'.

### Класс AppState:

представляет центральное хранилище данных приложения и содержит логику для работы с этими данными включая каталог продуктов, корзину, информацию о заказе и ошибки валидации форм. Расширяется базовым абстрактным классом Model<T> по интерфейсу 'IAppState'.

#### Методы:

- clearBasket - очищает корзину и генерирует соответствующие события.
- addProduct - добавляет товар в корзину.
- deleteProduct - удаляет товар из корзины.
- resetOrder - очищает данные заказа.
- setCatalog - устанавливает каталог товаров.
- setPreview - устанавливает товар для предпросмотра.
- setOrderField - устанавливает значение в поле заказа.
- validateOrder - проверяет значение полей в форме доставки.
- setContactField - устанавливает значение в поле контактов.
- validateContacts - проверяет значение в полей в форме контактов.

## Компоненты модели данных (View):

### Класс Component

### Класс Page:

управляет основными элементами интерфейса страницы. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'IPage'.

#### Методы:

- set counter - устанавливет счетчик товаров в корзине.
- set catalog - устанавливает каталог товаров.
- set locked - блокирует страницу.

### Класс Modal:

Отвечает за отображение модального окна, за открытие, закрытие и отображение контента в модальном окне. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'IModalData'.

#### Методы:

- set content - устанавливает содержимое в модальное окно.
- open - открывает модальное окно.
- close - закрывает модальное окно.
- render - рендерит модальное окно.

### Класс Card:

Управляет отображением информации о товаре, включая название, описание, цену и изображение. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'ICard'.

#### Методы:

- Set/Get - управляет свойствами карточки товара.

### Класс Form:

Предоставляет функционал для управления формами в проекте, отвечает за отображение формы и ее валидацию. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'IFormState.'

#### Методы:

- onInputChange - Обрабатывает событие ввода.
- set valid - управляет активностью кнопки в зависимости от валидности данных в форме.
- set errors - устанавливает и отображает ошибки.
- render - отображает состояние формы.

### Класс DeliveryForm:

Предоставляет возможности для управления формы заказа. Включает в себя элементы управления для выбора способа оплаты и ввода адреса доставки. Расширяется базовым классом Form<T> по интерфейсу 'IDeliveryForm'.

#### Методы:

- setPayment - переключает активное состояние кнопок способа оплаты.
- set address - устанавливает адрес доставки.

### Класс ContactForm:

Предоставляет возможности для управления формой контактных данных пользователя. Включает поля для ввода телефона и электронной почты Расширяется базовым классом Form<T> по интерфейсу 'IContactForm'.

#### Методы:

- set phone - усатанавливает номер телефона.
- set email - устанавлевает адрес почты.

### Класс Success:

Отвечает за отображение успешного оформления заказа. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'ISuccess', устанавливает текст итоговой информации успешного оформления заказа.

### Класс Basket:

Отвечает за отображение содержимого корзины на странице. Расширяется базовым абстрактным классом Component<T> по интерфейсу 'IBasket'.

#### Методы:

- set items - устанавливает товары в корзине.
- set selected - отключает/включает кнопку оформления заказа.
- set total - устанавливает и отображает общую стоимость товаров в корзине.

## Компоненты модели данных (Presentor):

### Класс Api

### Класс EventEmitter

### LarekApi:

Предназначен для обмена данными между сервером и моделью данных приложения, обеспечивает функциональность для получения списка продуктов, детальной информации о продуктах и оформления заказов. Расширяется классом Api реализуя интерфейс 'ILarekAPI'.

#### Методы:

- getProductItem - получает информацию о товаре по идентификатору.
- getProductList - получает список всех товаров с сервера.
- orderProducts - отправляет информацию о заказе на сервер и получает результат.
